# аналитика проекта

## источники данных

Кандидаты на анализ через git и gitlab/github API. Ищу крупные проекты на typescript со сборщиком webpack, так будет проще собрать статистику.
Поиск осложняется тем, что в наиболее крупных репах используется nx или bazel. К ним необходимо отдельно допиливать или искать утилиты для сбора аналитики.

 * где искать
     * https://gitmostwanted.com/top/stars/?term=&lang=TypeScript
     * https://gitlab.com/explore/projects/starred?name=angular&sort=stars_desc&language=19
 * [vscode](https://github.com/microsoft/vscode/blob/main/package.json)
    * IDE
    * TypeScript 93.9%, webpack 5
 * [nx](https://github.com/nrwl/nx)
    * build system
    * webpack 5, TypeScript 98.3%
 * [soapbox](https://gitlab.com/soapbox-pub/soapbox)
    * соцсеть
    * tsx 52.7%, typescript 44.8%, react 18, webpack 5, 9.7 GB Project Storage
 * [manyverse](https://gitlab.com/staltz/manyverse/-/tree/master)
    * соцсеть
    * tsx 87.8%, react 17, webpack 4, 722.5 MB Project Storage

## Инструменты

 * [git](https://stepanovv.ru/kbo/#/kb/frontend/git?id=%d0%b8%d0%bd%d1%81%d1%82%d1%80%d1%83%d0%bc%d0%b5%d0%bd%d1%82%d1%8b)
 * [webpack](https://github.com/bskydive/webpack-dep-graph)
 * [методика](https://github.com/bskydive/code_quality_js)
 * issues github
    * [токены github api](https://github.com/settings/tokens?type=beta)
    * https://docs.github.com/en/rest/issues/issues
    * https://docs.github.com/en/rest/overview/resources-in-the-rest-api
    * https://github.com/github/rest-api-description/tree/main/descriptions/api.github.com
    * https://docs.github.com/en/rest/issues/issues?apiVersion=2022-11-28#list-repository-issues
    * https://docs.github.com/en/rest/pulls/pulls?apiVersion=2022-11-28#about-pull-requests
 * issues gitlab
    * https://docs.gitlab.com/ee/api/issues.html
    * 
 * postman
    * [скрипты для любителей GUI](https://learning.postman.com/docs/writing-scripts/intro-to-scripts/)
    * 
 * git
	* https://github.com/arzzen/git-quick-stats
	* https://github.com/jwiegley/git-scripts
	* https://github.com/tj/git-extras
	* https://github.com/adamtornhill/code-maat

## Параметры анализа

 * ответы на главные вопросы: ожидания команды и бизнеса, что происходило с командой, кодом, процессами
 * прогнозы: сложность, скорость, производительность, объём кодовой базы
 * потери времени между этапами: issue, PR
 * добавление времени закрытия(без пересечений по датам): issues+pulls
 * суррогат времени закрытия: замена issues на pulls, время закрытия на количество строк/файлов
 * переоткрытие issue: ссылки на старые issue
 * производительность труда(ожидания бизнеса, тест бильярдного шара): issue/lines, commit/lines, workday/lines, churn
 * issues
	* id
	* дата создания
	* дата закрытия
	* создатель
	* исполнитель
 * PR
	* исполнитель
	* дата создания
	* дата закрытия
	* commit id
 * git commit
	* дата создания
	* количество строк +
	* количество строк -
	* количество файлов
	* папки
	* файлы

## Графики

 * график роста кодовой базы:
    * строк добавлено, строк удалено
    * дата/период
    * автор коммита
 * график работы(рабочие часы, возможность 40-часовой рабочей недели)
    * количество коммитов
    * дата/период
    * автор коммита
 * график ротации команд
    * количество активных авторов коммитов за период(вычисляется за два прохода)
    * дата/период
 * график отпусков
    * количество неактивных авторов коммитов за период(вычисляется за три прохода)
    * дата/период
 * график роста связности
    * строк добавлено, строк удалено
    * дата/период
    * путь к модулю(папка)
 * график роста производительности труда
    * количество коммитов/issue за период
    * количество авторов активных более 0,5 года(за период)
    * количество авторов активных менее 0,5 года(за период)
    * дата/период
 * комплексные графики(запуск скриптов на дату окончания периода)
    * качество кода
    * размер кодовой базы
    * связность кода
    * покрытие типами данных
    * покрытие тестами
    * время сборки проекта
 * график выгорания, уровень счастья
    * производительность выше/ниже средней/средневзвешенной


## Результаты анализа vscode

 * в открытом бэклоге
    * 7110 issues которые ушли в релиз
        * `grep '"url": "https://api.github.com/repos/microsoft/vscode/issues/' log/issues.responses/*.json | wc -l`
    * 21183 pulls closed - в 2 раза больше из-за скрытой репы vscode-internalbacklog
        * `grep '"url": "https://api.github.com/repos/microsoft/vscode/pulls/' log/pulls.responses/*.json | wc -l`
		 * [скрытый бэклог](https://github.com/microsoft/vscode-internalbacklog/issues/4174), видно [тут](https://github.com/microsoft/vscode/pull/183564)
 * Данные провалидированы 2 способами: bash+grep и nodejs+JSON.parse, количество issues/pulls сошлось
 * Сырые данные и результаты выложены в архивах в папке `assets`
 * Самые большие затраты времени за весь период(у кого больше всего назначено issues)
	1	Tyriar
	2	roblourens
	3	alexdima
	4	rebornix
	5	mjbvz
	6	sandy081
	7	hediet
	8	jrieken
	9	lszomoru
	10	joaomoreno
 * 
